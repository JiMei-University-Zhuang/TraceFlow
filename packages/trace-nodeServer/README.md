# TraceFlow Node Server

è¿™æ˜¯TraceFlowçš„Expressåç«¯å®ç°ç‰ˆæœ¬ï¼Œæä¾›æ›´è½»é‡çº§å’Œæ˜“äºç†è§£çš„æ¶æ„ã€‚

## é¡¹ç›®ç»“æ„

```
trace-nodeServer/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ controllers/     # æ§åˆ¶å™¨å±‚ï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ models/          # æ•°æ®æ¨¡å‹å±‚ï¼Œå®šä¹‰æ•°æ®ç»“æ„
â”‚   â”œâ”€â”€ services/        # æœåŠ¡å±‚ï¼Œå°è£…å¤æ‚ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ middlewares/     # ä¸­é—´ä»¶ï¼Œå¦‚æƒé™éªŒè¯ç­‰
â”‚   â”œâ”€â”€ routes/          # è·¯ç”±å®šä¹‰
â”‚   â”œâ”€â”€ utils/           # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ config/          # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ app.js           # åº”ç”¨å…¥å£
â”œâ”€â”€ public/              # é™æ€èµ„æº
â”œâ”€â”€ .env                 # ç¯å¢ƒå˜é‡
â”œâ”€â”€ .env.example         # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â””â”€â”€ package.json         # é¡¹ç›®ä¾èµ–
```

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ åŸ‹ç‚¹æ•°æ®æ”¶é›†API
- ğŸ“Š æ•°æ®ç»Ÿè®¡åˆ†æ
- ğŸ”’ ç”¨æˆ·è®¤è¯ä¸æˆæƒ
- ğŸ“ æ—¥å¿—è®°å½•
- ğŸ”„ æ•°æ®åº“é›†æˆ

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 16
- MySQL >= 5.7

### å®‰è£…ä¾èµ–

```bash
pnpm install
```

### é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶
cp .env.example .env

# ç¼–è¾‘.envæ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“ç­‰ä¿¡æ¯
vim .env
```

### è¿è¡Œå¼€å‘æœåŠ¡å™¨

```bash
pnpm dev
```

æœåŠ¡å°†åœ¨ http://localhost:3001 è¿è¡Œã€‚

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
pnpm build
```

### è¿è¡Œç”Ÿäº§æœåŠ¡å™¨

```bash
pnpm start
```

## APIæ–‡æ¡£

### æ•°æ®é‡‡é›†æ¥å£

- POST /api/collect - æ”¶é›†åŸ‹ç‚¹æ•°æ®
  - è¯·æ±‚ä½“: { eventType, eventName, userId, ... }
  - å“åº”: { success, message, eventId }

### æ•°æ®åˆ†ææ¥å£

- GET /api/analytics/events - è·å–äº‹ä»¶ç»Ÿè®¡
  - æŸ¥è¯¢å‚æ•°: startDate, endDate, eventType
  - å“åº”: { totalEvents, eventsByType }

## ä¸NestJSç‰ˆæœ¬çš„åŒºåˆ«

æœ¬Expressç‰ˆæœ¬ç›¸å¯¹äºNestJSç‰ˆæœ¬æ›´åŠ è½»é‡ï¼Œä¸»è¦åŒºåˆ«ï¼š

1. **æ›´æ‰å¹³çš„é¡¹ç›®ç»“æ„**ï¼šæ²¡æœ‰æ¨¡å—æ¦‚å¿µï¼Œé€šè¿‡æ–‡ä»¶å¤¹ç»„ç»‡ä»£ç 
2. **æ›´ç›´æ¥çš„ä¸­é—´ä»¶ä½¿ç”¨**ï¼šç›´æ¥ä½¿ç”¨Expressä¸­é—´ä»¶ï¼Œæ— éœ€é€‚é…å™¨
3. **æ›´ä½çš„å­¦ä¹ æˆæœ¬**ï¼šExpressçš„APIå’Œæ¦‚å¿µæ›´åŠ ç®€å•æ˜äº†
4. **æ›´çµæ´»çš„å®ç°æ–¹å¼**ï¼šæ²¡æœ‰å¼ºåˆ¶çš„æ¶æ„æ¨¡å¼ï¼Œè‡ªç”±åº¦æ›´é«˜

## æŠ€æœ¯æ ˆ

- Express 4.18
- Sequelize 6.35
- MySQL
- Winston (æ—¥å¿—)
